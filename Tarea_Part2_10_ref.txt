Временная таблица 1 workshop_activity
Сбор данный о мастерской
Вычисляется:
- num_craftsdwarves число неповторяющихся id числа работников,
- products_produced -набор продуктов мастерской (для будущего использования), 
- total_quantity_produced общее число продуктов для 1 мастерской
- total_production_value - Общая стоимость продуктов (p.value * wp.quantity)
- materials_used -число в наборе материалов в мастерской
- total_materials_consumed - количество материалов в мастерской
- production_time время затраченное на изготовление 1 продукта (не догадалась)
- active_production_days подсчет активных дней в мастерской, как числа неповторяющихся дат
- total_days подсчет всех дней затраченных в мастерской на все продукты

Таблица 2 - craftsdwarf_productivity
Продуктивность работников
Проммежуточные поля для результирующей таблицы:

products_created - общее число созданных продуктов
avg_quality - среднее качество продукта, созданного рабоником
total_value_created - стоимость рподукции одногоработника

Таблица 3 - craftsdwarf_skills
avg_skill_level
max_skill_level
Вычисление навыков работника, извлекая его из цепочки добавленных таблица 
skills, dwarf_skills и  workshop_craftsdwarves
путем сравнеия id  и выборкой из поля skills.category = 'Crafting'

Таблица 4 material_efficiency
Вычисление промежуточных полей для итоговой таблицы

input_quantity - количесиво используемых материалов
output_quantity - количество оставшихся  материалов(is_input = true or false)
unique_inputs - количество в наборе разных материалов (count) gj nfrjve ;t ghbywbge
unique_outputs 

Итоговая таблица:
Вычисления:
daily_production_rate - вся продукция цеха / все число рабочих дней
value_per_material_unit - стоимость продукции / стоимость материалов
workshop_utilization_percent - число рабочих дней / общее число дней 
material_conversion_ratio - используемые материалы/ неиспользуемые
average_craftsdwarf_skill - среднее показатель навыков по 1 цеху
skill_quality_correlation - средний уровень навыков/средний уровень качества по цеху

Группировка по полям итоговой таблицы и таблицыmaterial_efficiency

Сортировка по производительности цеха



ОШибки в моем запросе:
- Забыла присвоить имена полям workshop_id,workshop_name, workshop_type
- Неправильно вычислила Общ стоимость продуктов  - total_production_value
- Два раза вычислила стоимость всех товаров (total_production_value и sum_m1)
- не догадалась как считать время потраченное работником на 1 продукт..
- по другому считала число активных дней, попыталась посчитать число неактивных дней 
- неправильно вычисляла период производства продукции.
  Взяла не ту функцию и мудрила с датами. Надо было учесть wc.assignment_date - 
  дата начала работы
- created_by - не поняла, что это про работника, который создал продукт
   Поэтому дальше пришлось мудрить с производительностью работника и навыками
   
   - При вычислении навыков - среднее по палате получилось.. 
   так как на поняла что из поля category  можно вытащить работника цеха:
   s.category = 'Crafting'
 -  workshop_materials.is_input - используется ли материал. Это было в прошлом задании
    но не прочувствовала и поэтому не использовала, а начала придумывать
- 	
   material_conversion_ratio - неправльно поняла что надо.Делаа вообще не то.
   Надо было- отношение неиспользуемых материалов к использеумым с учетом
   поля workshop_materials.is_input
 - средний уровень навыков надо было вывести по цеху, учесть цех, как минимум   
 У меня вышло по всем работникам, а не по работникам цеха
 
 - Корелляция навык- качество- надо было использовать функцию кореляции CORR
