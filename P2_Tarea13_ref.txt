Таблица squad_battle_stats - статискика боевого оряда (не догадалась разбить по темам)
- Вычисляется total_balltes
и далее:
- Общее число побед, поражений, отступлений - как сумма значений полей с условием "исхода боя"
- Общее числосвих и чужих потерь
- Даты перого и посленего боя - как поле date таблицы squad_battles - максимальное и минимальное
для возможных вычислений в дальнейшем 

Таблица squad_member_history - члены отрядов
- total_members_ever - понятно
- current_members - понятно
- Вычисление числа ушедших по причине - 'Death', как число погибших
для возможных дальнейших вычислений

Таблица squad_skill_progression.
- Вычисление avg_skill_improvement - среднее улучшение навыков как разницы уровня навыков level 
c даты поступления(не раннее join_date squad_members) и последней зафиксированной даты * (date из dwarw_skills)
Для сравнения дат присоединяется 2 раза таблица dwarf_skills со сравнием и  анализом дат из таблиц squad_members и dwarw_skills.
* В запросе выделяется максимальная дата SELECT MAX(date) FROM dwarf_skills для определения текущей даты ds_current.date таблицы dwarf_skills.
 - Вычисляется максимальный уровень навыков max_current_skill для дальнейшей обработки

 Тблица squad_equipment_quality.
 Вычисляется:
- Среднее и минимальное качество экипировки
-  Сколько оружия, брони, личного состава из таблицы equipment, дл дальнейшего использования.
Cвязка с таблицей squad_equipment через поля таблицы equipment.

Таблица squad_training_effectiveness.
Вычисляется:
 - total_training_sessions  - понятно
- avg_training_effectiveness - +
- total_training_hours +
 - кореляция часов тренировок и количества побед

Формиировние основной таблицы.
 - 
Вычисление:
- количества потерь - каk оношение числа потерь (casualities) к общему числу гномов в отряда
- retention_rate  (+)
- victory_percentage (+)
Далее идет вычисление полезных полей, которых нет в ответе, но информация важна:
avg_service_days -  используется, в итоге, для группировки
Наряду с avg_equipment_quality
total_equipment_pieces
min_equipment_quality 


Мои ошибки
-Надо было рпостроить промежуточные таблицы по пунтам условия.
-total_balltes - нужно было суммировать с повторениями, так как это - общее число, а не набор
-sb.outcome - текстовый формат а не логический
-casualty_rate - вычислила неправильно уровень потерь - это не обшее число
SUM (sqb.enemy_casualties)  также общее число

- Не выделили информацию по членам отряда в отдельную таблиц, а она из другой области
total_members_ever - сделала с условием join_data <> null, лишнее
current_members - сделала с условием exit_data <> null, надо было с ориентироваться по причине уходда exit_reason
 - Запуталась в вычислении улучшения навыков. Неправильно данные самые ранние
и самых последних навыков по дате. использовала таблицу squad_operation, полагая, что операция военная.
- Надо было заложить дату только из таблицы dwarf_skills и выбирать даты из нее для гомов-членов отряда а не для  операций всего отряда.

-  avg_training_effectiveness - при вычислении не привела к формату DECIMAL
- кореляцию сделала неправильно - привела процент побед а не количество, это неверно

 - Вывела вычисление лидера в отдельную временную таблицу. Можно было просто сравнить 
military_squads.leader_id = dwarves.dwarf_id, так ка лидер в каждом отряде всего один и гномы в отрядах не повторяются,
можно не делать связку по отрядам. 
 - Неправильно поняла casualty_rate, ка кобщее число, а надо уровень - процент от числа гномов в отряда
 - Неаправильно поняла casaualities. Подумала что это не общее число всех (+ врягов) жертв, а число жертв отряда
Отсюда пошла ошибка в casualty_eschange_ratio 


Вывод: необходимо структурировать построение временных таблиц. Уходить вычисления результирующих полей вперемешку - "как удобно"
 -  отношение жертв врагов к общему числу жертв
